{% extends 'base.html' %}

{% load static %}

{% block headers %}
    <style>
        .educational-resources-section {
            padding: 2rem 0;
            background: #f8f9fa;
        }

        .educational-resources-section h2 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
        }

        .resources, .glossary {
            margin-bottom: 2rem;
        }

        .resources h3, .glossary h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .resources ul, .glossary ul {
            list-style-type: none;
            padding: 0;
        }

        .resources li, .glossary li {
            margin-bottom: 0.5rem;
        }

        .resources a, .glossary a {
            color: #007bff;
            text-decoration: none;
        }

        .resources a:hover, .glossary a:hover {
            text-decoration: underline;
        }

        .call-to-action-section {
            padding: 2rem 0;
            background: #e9ecef;
            text-align: center;
        }

        .call-to-action-section h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .cta-buttons .btn {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 0.25rem;
            text-decoration: none;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #007bff;
            color: #fff;
            border: none;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: #fff;
            border: none;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }
        .hero-section {
            background-image: url("https://images.unsplash.com/photo-1542042163-0a2048c5aaf4");
            background-size: cover;
            background-position: center;
            color: #fff;
            text-align: center;
            padding: 3rem 0;
            position: relative;
        }

        .hero-section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
        }

        .hero-section .container {
            position: relative;
            z-index: 2;
        }

        .hero-section h1 {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .hero-section p {
            font-size: 1.5rem;
            margin-bottom: 0;
        }

        .charts-section,
        .data-overview-section,
        .filter-section,
        .data-tables-section,
        .insight-highlights-section,
        .user-feedback-section {
            padding: 2rem 0;
            background: #f8f9fa;
        }

        .charts-section h2,
        .data-overview-section h2,
        .filter-section h2,
        .data-tables-section h2,
        .insight-highlights-section h2,
        .user-feedback-section h2 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
        }

        .chart-container,
        .key-metrics,
        .filter-container,
        .customize-container,
        .table-container,
        .insight-container,
        .feedback-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .chart,
        .metric,
        .filter-container select,
        .filter-container input,
        .customize-container button,
        .table-container table,
        .insight,
        .feedback-form {
            flex: 0 1 45%;
            margin: 1rem;
            background: #fff;
            padding: 1rem;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
        }

        .chart-container canvas,
        .table-container table,
        .insight,
        .feedback-form {
            width: 100%;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid #dee2e6;
        }

        th {
            background-color: #f8f9fa;
        }

        .download-buttons,
        .customize-container {
            text-align: center;
        }

        .download-buttons button,
        .customize-container button,
        .feedback-form button {
            margin: 0.5rem;
            padding: 0.5rem 1rem;
            border: none;
            background: #007bff;
            color: #fff;
            border-radius: 0.25rem;
            cursor: pointer;
        }

        .download-buttons button:hover,
        .customize-container button:hover,
        .feedback-form button:hover {
            background: #0056b3;
        }

        .user-contributions textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }

        .feedback-form textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }
    </style>
{% endblock headers %}

{% block content %}
<section class="hero-section">
    <div class="container">
        <h1>Breast Cancer Risk Data and Visualizations</h1>
        <p>Explore the data collected from the questionnaires and understand the insights through interactive charts and graphs.</p>
    </div>
</section>

<section class="data-overview-section">
    <div class="container">
        <h2>Data Overview</h2>
        <p>Welcome to the data visualization page. Here, you can explore the data collected from our breast cancer risk assessment questionnaires. Navigate through the sections to understand the key insights and metrics derived from the responses.</p>
        <div class="key-metrics">
            <div class="metric">
                <h3>1,200</h3>
                <p>Participants</p>
            </div>
            <div class="metric">
                <h3>65%</h3>
                <p>Average Risk Score</p>
            </div>
            <div class="metric">
                <h3>200</h3>
                <p>High Risk Cases</p>
            </div>
        </div>
    </div>
</section>

<section class="charts-section">
    <div class="container">
        <h2>Interactive Charts and Graphs</h2>
        <div class="chart-container">
            <!-- Pie Chart -->
            <div class="chart">
                <canvas id="riskLevelsChart"></canvas>
                <p class="text-center">Distribution of Risk Levels (Low, Medium, High)</p>
            </div>
            <!-- Bar Chart -->
            <div class="chart">
                <canvas id="ageDistributionChart"></canvas>
                <p class="text-center">Age Distribution of Participants</p>
            </div>
            <!-- Line Chart -->
            <div class="chart">
                <canvas id="trendsChart"></canvas>
                <p class="text-center">Trends in Risk Scores Over Time</p>
            </div>
            <!-- Heat Map -->
            <div class="chart">
                <canvas id="geographicalDistributionChart"></canvas>
                <p class="text-center">Geographical Distribution of Risk Levels</p>
            </div>
            <!-- Scatter Plot -->
            <div class="chart">
                <canvas id="correlationChart"></canvas>
                <p class="text-center">Correlation Between Age and Risk Score</p>
            </div>
        </div>
    </div>
</section>

<section class="filter-section">
    <div class="container">
        <h2>Filter and Customize</h2>
        <div class="filter-container">
            <select id="ageFilter">
                <option value="all">All Ages</option>
                <option value="20-30">20-30</option>
                <option value="31-40">31-40</option>
                <option value="41-50">41-50</option>
                <option value="51-60">51-60</option>
                <option value="61+">61+</option>
            </select>
            <select id="genderFilter">
                <option value="all">All Genders</option>
                <option value="female">Female</option>
                <option value="male">Male</option>
            </select>
            <select id="lifestyleFilter">
                <option value="all">All Lifestyles</option>
                <option value="smoker">Smoker</option>
                <option value="non-smoker">Non-Smoker</option>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
            </select>
        </div>
        <div class="customize-container">
            <button onclick="customizeCharts()">Customize Charts</button>
        </div>
    </div>
</section>

<section class="data-tables-section">
    <div class="container">
        <h2>Detailed Data Tables</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Participant ID</th>
                        <th>Age</th>
                        <th>Gender</th>
                        <th>Lifestyle</th>
                        <th>Risk Score</th>
                        <th>Geographical Location</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Example Data -->
                    <tr>
                        <td>1</td>
                        <td>25</td>
                        <td>Female</td>
                        <td>Active</td>
                        <td>70</td>
                        <td>New York</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>45</td>
                        <td>Male</td>
                        <td>Smoker</td>
                        <td>80</td>
                        <td>California</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>35</td>
                        <td>Female</td>
                        <td>Non-Smoker</td>
                        <td>60</td>
                        <td>Texas</td>
                    </tr>
                    <!-- Add more data rows as needed -->
                </tbody>
            </table>
        </div>
        <div class="download-buttons">
            <button onclick="downloadCSV()">Download CSV</button>
            <button onclick="downloadExcel()">Download Excel</button>
        </div>
    </div>
</section>

<section class="insight-highlights-section">
    <div class="container">
        <h2>Insight Highlights</h2>
        <div class="insight-container">
            <div class="insight">
                <h3>Key Insight 1</h3>
                <p>Participants aged 40-50 have the highest average risk scores.</p>
                <p>Interpretation: This suggests a higher vulnerability in this age group, which could be due to various lifestyle or genetic factors.</p>
            </div>
            <div class="insight">
                <h3>Key Insight 2</h3>
                <p>Participants with active lifestyles generally have lower risk scores.</p>
                <p>Interpretation: This highlights the importance of maintaining an active lifestyle as a potential preventive measure against breast cancer.</p>
            </div>
            <div class="insight">
                <h3>Key Insight 3</h3>
                <p>Geographical distribution shows higher risk scores in urban areas compared to rural areas.</p>
                <p>Interpretation: This may be influenced by environmental factors, stress levels, and lifestyle differences in urban settings.</p>
            </div>
        </div>
    </div>
</section>

<section class="user-feedback-section">
    <div class="container">
        <h2>User Interaction and Feedback</h2>
        <div class="feedback-container">
            <div class="user-contributions">
                <h3>User Contributions</h3>
                <textarea id="userContributions" rows="4" placeholder="Share your interpretations or insights based on the data..."></textarea>
                <button onclick="submitContribution()">Submit</button>
            </div>
            <div class="feedback-form">
                <h3>Feedback Form</h3>
                <form id="feedbackForm">
                    <label for="feedback">Your Feedback:</label>
                    <textarea id="feedback" name="feedback" rows="4" placeholder="Provide your feedback on the data visualizations and suggest improvements..."></textarea>
                    <button type="submit">Submit Feedback</button>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="educational-resources-section">
    <div class="container">
        <h2>Educational Resources</h2>
        <div class="resources">
            <h3>Articles</h3>
            <ul>
                <li><a href="https://www.cancer.org/cancer/breast-cancer.html" target="_blank">Understanding Breast Cancer</a></li>
                <li><a href="https://www.mayoclinic.org/tests-procedures/mammogram/about/pac-20384806" target="_blank">The Importance of Mammograms</a></li>
                <li><a href="https://www.breastcancer.org/symptoms/understand_bc/statistics" target="_blank">Breast Cancer Statistics</a></li>
            </ul>
        </div>
        <div class="resources">
            <h3>Videos</h3>
            <ul>
                <li><a href="https://www.youtube.com/watch?v=Se4hdqE3Qk0" target="_blank">Breast Cancer Risk Factors</a></li>
                <li><a href="https://www.youtube.com/watch?v=QnvDiivXH4c" target="_blank">How to Perform a Breast Self-Exam</a></li>
                <li><a href="https://www.youtube.com/watch?v=lN9UBPbsU3c" target="_blank">Understanding Your Mammogram Results</a></li>
            </ul>
        </div>
        <div class="glossary">
            <h3>Glossary of Terms</h3>
            <ul>
                <li><strong>Risk Score:</strong> A numerical value representing the probability of developing breast cancer based on various factors.</li>
                <li><strong>Mammogram:</strong> An X-ray picture of the breast used to detect early signs of breast cancer.</li>
                <li><strong>Biopsy:</strong> A medical test involving the removal of cells or tissues for examination to determine the presence of disease.</li>
                <li><strong>Benign:</strong> Non-cancerous growths or tumors that do not spread to other parts of the body.</li>
                <li><strong>Malignant:</strong> Cancerous growths or tumors that have the potential to spread to other parts of the body.</li>
            </ul>
        </div>
    </div>
</section>

<section class="call-to-action-section">
    <div class="container">
        <h2>Take Action Now</h2>
        <div class="cta-buttons">
            <a href="{% url 'questionnaire' %}" class="btn btn-primary">Take the Questionnaire</a>
            <button class="btn btn-secondary" onclick="shareOnSocialMedia()">Share Data on Social Media</button>
        </div>
    </div>
</section>
{% endblock content %}


{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function downloadCSV() {
            alert("Download CSV clicked");
        }
    
        function downloadExcel() {
            alert("Download Excel clicked");
        }
        const riskLevelsData = {
            labels: ['Low', 'Medium', 'High'],
            datasets: [{
                data: [300, 600, 300], // Example data
                backgroundColor: ['#28a745', '#ffc107', '#dc3545']
            }]
        };

        const ageDistributionData = {
            labels: ['20-30', '31-40', '41-50', '51-60', '61+'],
            datasets: [{
                label: 'Participants',
                data: [200, 300, 250, 150, 100], // Example data
                backgroundColor: '#007bff'
            }]
        };

        const trendsData = {
            labels: ['January', 'February', 'March', 'April', 'May'],
            datasets: [{
                label: 'Risk Scores',
                data: [65, 59, 80, 81, 56], // Example data
                borderColor: '#17a2b8',
                fill: false
            }]
        };

        const geographicalDistributionData = {
            labels: ['New York', 'California', 'Texas', 'Florida', 'Illinois'],
            datasets: [{
                label: 'Geographical Distribution',
                data: [30, 25, 20, 15, 10], // Example data
                backgroundColor: 'rgba(0,123,255,0.6)',
                borderColor: 'rgba(0,123,255,1)',
                borderWidth: 1
            }]
        };

        const correlationData = {
            labels: [20, 30, 40, 50, 60],
            datasets: [{
                label: 'Age vs. Risk Score',
                data: [
                    { x: 20, y: 65 },
                    { x: 30, y: 59 },
                    { x: 40, y: 80 },
                    { x: 50, y: 81 },
                    { x: 60, y: 56 }
                ], // Example data
                backgroundColor: '#17a2b8'
            }]
        };

        // Chart configurations
        const riskLevelsConfig = {
            type: 'pie',
            data: riskLevelsData
        };

        const ageDistributionConfig = {
            type: 'bar',
            data: ageDistributionData
        };

        const trendsConfig = {
            type: 'line',
            data: trendsData
        };

        const geographicalDistributionConfig = {
            type: 'bubble',
            data: geographicalDistributionData
        };

        const correlationConfig = {
            type: 'scatter',
            data: correlationData,
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom'
                    }
                }
            }
        };

        // Render the charts
        window.onload = function () {
            const riskLevelsCtx = document.getElementById('riskLevelsChart').getContext('2d');
            new Chart(riskLevelsCtx, riskLevelsConfig);

            const ageDistributionCtx = document.getElementById('ageDistributionChart').getContext('2d');
            new Chart(ageDistributionCtx, ageDistributionConfig);

            const trendsCtx = document.getElementById('trendsChart').getContext('2d');
            new Chart(trendsCtx, trendsConfig);

            const geographicalDistributionCtx = document.getElementById('geographicalDistributionChart').getContext('2d');
            new Chart(geographicalDistributionCtx, geographicalDistributionConfig);

            const correlationCtx = document.getElementById('correlationChart').getContext('2d');
            new Chart(correlationCtx, correlationConfig);
        };

        // Customize charts function
        function customizeCharts() {
            const ageFilter = document.getElementById('ageFilter').value;
            const genderFilter = document.getElementById('genderFilter').value;
            const lifestyleFilter = document.getElementById('lifestyleFilter').value;

            console.log('Filters:', { ageFilter, genderFilter, lifestyleFilter });

            // Update the charts based on the selected filters
            // Add your customization logic here
        }
        function submitContribution() {
            const contribution = document.getElementById('userContributions').value;
            // Handle submission of user contribution
        }

        // Handle feedback form submission
        document.getElementById('feedbackForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const feedback = document.getElementById('feedback').value;
            // Handle feedback form submission
        });
    </script>
{% endblock scripts %}
    
