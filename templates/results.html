{% extends 'base.html' %}

{% load static %}

{% block headers %}
    <style>
        .cta-section {
            background-color: #007bff;
            color: #fff;
            padding: 2rem 0;
        }

        .cta-section h2 {
            margin-bottom: 1rem;
            text-align: center;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .cta-buttons a {
            padding: 0.75rem 1.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            color: #007bff;
            background-color: #fff;
            border-radius: 5px;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .cta-buttons a:hover {
            background-color: #e9ecef;
        }
    </style>
    <style>
        .testimonials-section {
            background-color: #f9f9f9;
            padding: 2rem 0;
        }

        .testimonials-section h2 {
            margin-bottom: 1rem;
            text-align: center;
        }

        .testimonial-card {
            margin: 1rem 0;
            padding: 1.5rem;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .testimonial-card h5 {
            margin-bottom: 0.5rem;
        }

        .testimonial-card p {
            margin-bottom: 0.5rem;
            font-style: italic;
        }

        .testimonial-card .user-info {
            font-size: 0.9rem;
            color: #6c757d;
        }
    </style>
    <style>
        .support-section {
            background-color: #fff;
            padding: 2rem 0;
        }

        .support-section h2 {
            margin-bottom: 1rem;
        }

        .support-section p {
            margin-bottom: 1rem;
        }

        .support-section .card {
            margin-bottom: 1rem;
        }

        .contact-form .form-group {
            margin-bottom: 1rem;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-group .btn {
            flex: 1;
        }
    </style>
    <style>
        .next-steps-section {
            background-color: #f8f9fa;
            padding: 2rem 0;
        }

        .next-steps-section h2 {
            margin-bottom: 1rem;
        }

        .next-steps-section p {
            margin-bottom: 1rem;
        }

        .next-steps-section .card {
            margin-bottom: 1rem;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-group .btn {
            flex: 1;
        }
    </style>
    <style>
        .recommendations-section {
            background-color: #f1f1f1;
            padding: 2rem 0;
        }

        .recommendations-section h5 {
            margin-bottom: 1rem;
        }

        .recommendations-section p {
            margin-bottom: 0.5rem;
        }

        .recommendations-section .card {
            margin-bottom: 1rem;
        }

        .resources-list {
            list-style: none;
            padding: 0;
        }

        .resources-list li {
            margin-bottom: 0.5rem;
        }

        .resources-list a {
            color: #007bff;
            text-decoration: none;
        }

        .resources-list a:hover {
            text-decoration: underline;
        }
    </style>
    <style>
        .detailed-analysis-section {
            background-color: #f8f9fa;
            padding: 2rem 0;
        }

        .detailed-analysis-section h5 {
            margin-bottom: 1rem;
        }

        .list-group-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chart-container {
            position: relative;
            margin: auto;
            height: 300px;
            width: 100%;
        }

        .chart-container-large {
            position: relative;
            margin: auto;
            height: 400px;
            width: 100%;
        }
        .risk-assessment-section {
            background-color: #f8f9fa;
        }

        .risk-assessment-section .card {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .risk-assessment-section .card-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .risk-indicator {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto;
        }

        .risk-indicator.low {
            background-color: #28a745;
        }

        .risk-indicator.medium {
            background-color: #ffc107;
        }

        .risk-indicator.high {
            background-color: #dc3545;
        }

        .risk-label {
            font-size: 1.2rem;
            color: #fff;
            font-weight: bold;
        }

        .risk-score h3 {
            font-size: 2rem;
            color: #007bff;
        }

        .risk-explanation {
            font-size: 1rem;
        }

        .risk-explanation p {
            margin-bottom: 0;
        }
        .summary-section {
            background-color: #f8f9fa;
        }

        .summary-section .card {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .summary-section .card-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .summary-section .list-group-item {
            font-size: 1.1rem;
            padding: 15px 20px;
        }

        .summary-section .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 50px;
            transition: background-color 0.3s ease;
        }

        .summary-section .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }
        .hero-section {
            position: relative;
            background: url('{% static "images/results-img-1.png" %}') no-repeat center center/cover;
            color: #fff;
            padding: 100px 0;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-content h1 {
            font-size: 3rem;
            font-weight: bold;
        }

        .hero-content p {
            font-size: 1.5rem;
            margin-top: 10px;
        }

        .results-container {
            padding: 50px 0;
        }

        .result-card {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .result-card h4 {
            font-size: 1.25rem;
            font-weight: bold;
        }

        .result-card p {
            font-size: 1rem;
            color: #6c757d;
        }

        .icon {
            font-size: 2rem;
            color: #007bff;
            margin-right: 10px;
        }

    </style>
{% endblock headers %}

{% block content %}
<section class="hero-section text-center">
    <div class="container hero-content">
        <h1>Your Breast Cancer Risk Assessment Results</h1>
        <p>Based on your responses, here’s your personalized risk assessment.</p>
    </div>
</section>

<section class="results-container">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-lg-4">
                <div class="result-card">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-user-md icon"></i>
                        <h4>Risk Level</h4>
                    </div>
                    <p>Your risk level based on the assessment is <strong>Moderate</strong>. It is advised to consult with your healthcare provider for further evaluation.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="result-card">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-thermometer-half icon"></i>
                        <h4>Score</h4>
                    </div>
                    <p>Your total score is <strong>56</strong>. This score indicates the presence of some risk factors.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="result-card">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-calendar-check icon"></i>
                        <h4>Next Steps</h4>
                    </div>
                    <p>Based on your responses, we recommend scheduling an appointment with your doctor and considering a mammogram.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="result-card">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-book-medical icon"></i>
                        <h4>Resources</h4>
                    </div>
                    <p>Explore our resources for more information on breast cancer, prevention strategies, and support groups.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="summary-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 mb-4">
                <h2 class="text-center">Summary of Your Information</h2>
                <p class="text-center">Review the information you provided. If there are any errors, you can edit and resubmit your responses.</p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">User Information</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Name:</strong> {{ user.name }}</li>
                            <li class="list-group-item"><strong>Age:</strong> {{ user.age }}</li>
                            <li class="list-group-item"><strong>Key Health History Points:</strong> {{ user.health_history }}</li>
                            <li class="list-group-item"><strong>Symptoms Reported:</strong> {{ user.symptoms }}</li>
                        </ul>
                    </div>
                </div>
                {% if editable %}
                <div class="text-center">
                    <a href="#" class="btn btn-primary">Edit Your Responses</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<section class="risk-assessment-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 mb-4 text-center">
                <h2>Risk Assessment Results</h2>
                <p>Based on your responses, here’s your personalized risk assessment.</p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-body text-center">
                        <h5 class="card-title">Your Risk Level</h5>
                        <div id="riskLevelIndicator" class="my-4">
                            <div class="risk-indicator high">
                                <span class="risk-label">High Risk</span>
                            </div>
                        </div>
                        <div class="risk-score">
                            <h3>Risk Score: 75%</h3>
                        </div>
                        <div class="risk-explanation mt-4">
                            <p class="text-muted">
                                Based on your responses, you fall into the high-risk category. This means there is a significant likelihood of developing breast cancer. It is strongly recommended to consult a healthcare provider for a detailed evaluation and consider regular screenings.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="detailed-analysis-section">
    <div class="container">
        <div class="row">
            <div class="col-12 mb-4 text-center">
                <h2>Detailed Analysis</h2>
                <p>Understand the factors contributing to your breast cancer risk.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-4">
                <h5>Factors Contributing to Risk</h5>
                <ul class="list-group">
                    {% for factor in risk_factors %}
                        <li class="list-group-item">
                            {{ factor.question }}: <strong>{{ factor.value }}</strong>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-md-6 mb-4">
                <h5>Comparison to Averages</h5>
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 mb-4">
                <h5>Visual Analysis</h5>
                <div class="chart-container-large">
                    <canvas id="riskFactorsChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="recommendations-section">
    <div class="container">
        <div class="row">
            <div class="col-12 mb-4 text-center">
                <h2>Personalized Recommendations</h2>
                <p>Based on your risk level, here are some steps you can take.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-12 mb-4">
                {% if risk_level == 'low' %}
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Low Risk</h5>
                            <p>You're at a low risk of breast cancer. Here are some tips to maintain your health:</p>
                            <ul>
                                <li>Perform regular self-examinations.</li>
                                <li>Maintain a healthy diet and exercise regularly.</li>
                                <li>Avoid smoking and limit alcohol consumption.</li>
                            </ul>
                        </div>
                    </div>
                {% elif risk_level == 'medium' %}
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Medium Risk</h5>
                            <p>Your risk level suggests that you should consider more frequent screenings and lifestyle changes:</p>
                            <ul>
                                <li>Schedule regular mammograms and clinical breast exams.</li>
                                <li>Maintain a healthy weight and diet.</li>
                                <li>Exercise regularly and manage stress.</li>
                            </ul>
                        </div>
                    </div>
                {% elif risk_level == 'high' %}
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">High Risk</h5>
                            <p>You're at a high risk of breast cancer. It's important to take the following steps:</p>
                            <ul>
                                <li>Consult with a healthcare professional for personalized advice.</li>
                                <li>Consider advanced screenings such as MRI.</li>
                                <li>Discuss potential preventive measures with your doctor.</li>
                            </ul>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-12 mb-4">
                <h5>Resources and Links</h5>
                <ul class="resources-list">
                    <li><a href="https://www.cancer.org/cancer/breast-cancer.html" target="_blank">American Cancer Society: Breast Cancer</a></li>
                    <li><a href="https://www.nationalbreastcancer.org/breast-cancer-awareness" target="_blank">National Breast Cancer Foundation: Awareness</a></li>
                    <li><a href="https://www.mayoclinic.org/tests-procedures/mammogram/about/pac-20384806" target="_blank">Mayo Clinic: Mammograms</a></li>
                    <li><a href="https://www.cdc.gov/cancer/breast/basic_info/screening.htm" target="_blank">CDC: Breast Cancer Screening</a></li>
                </ul>
            </div>
        </div>
    </div>
</section>
<section class="next-steps-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2>Next Steps</h2>
                <p>Based on your risk assessment, here are the next steps you should consider.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Schedule a Screening</h5>
                        <p>It's important to schedule regular screenings. Here's how you can do it:</p>
                        <ul>
                            <li>Find a nearby screening center using our <a href="#">locator tool</a>.</li>
                            <li>Call your healthcare provider to schedule a mammogram.</li>
                            <li>Consider using online appointment scheduling tools.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Consult a Doctor</h5>
                        <p>Discuss your results with a healthcare provider. Here's how to prepare:</p>
                        <ul>
                            <li>Write down any questions or concerns you have.</li>
                            <li>Bring your risk assessment results to your appointment.</li>
                            <li>Ask about next steps and any additional screenings needed.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Printable Report</h5>
                        <p>Download or print your results and recommendations for future reference:</p>
                        <button class="btn btn-primary">Download Report</button>
                        <button class="btn btn-secondary">Print Report</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Share Results</h5>
                        <p>Securely share your results with your healthcare provider:</p>
                        <button class="btn btn-primary">Email Results</button>
                        <button class="btn btn-secondary">Download Results</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="support-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2>Support and Contact</h2>
                <p>If you have any questions or need further support, please reach out to us.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Support Options</h5>
                        <p>Our team is here to help you with any questions or concerns you may have.</p>
                        <p><strong>Support Hotline:</strong> 1-800-123-4567</p>
                        <p><strong>Operating Hours:</strong> Monday to Friday, 9 AM - 5 PM</p>
                        <p>For more self-help resources, visit our <a href="#">FAQ page</a>.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Contact Form</h5>
                        <p>If you have specific questions, feel free to reach out using the form below:</p>
                        <form class="contact-form" method="post" action="{% url 'contact' %}">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea class="form-control" id="message" name="message" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="testimonials-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2>Testimonials and Success Stories</h2>
                <p>Read about the experiences of others who have taken action based on their results.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <h5>Mary Johnson</h5>
                    <p>"After taking the assessment, I followed the recommended screenings and caught my cancer early. The early detection saved my life."</p>
                    <div class="user-info">Age: 45 | Risk Level: High</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <h5>Linda Smith</h5>
                    <p>"The personalized advice helped me understand my risk factors and take proactive steps to improve my health."</p>
                    <div class="user-info">Age: 38 | Risk Level: Medium</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <h5>Jane Doe</h5>
                    <p>"I found the resources and support links extremely helpful. It gave me the confidence to get the necessary screenings."</p>
                    <div class="user-info">Age: 50 | Risk Level: Low</div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="cta-section text-center">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2>Take the Next Steps for Your Health</h2>
                <p>Based on your assessment, it's important to take action. Schedule your screening, consult with a healthcare provider, or find out more about breast cancer prevention.</p>
                <div class="cta-buttons">
                    <a href="#" class="btn">Schedule Screening</a>
                    <a href="#" class="btn">Consult a Doctor</a>
                    <a href="#" class="btn">Learn More</a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}
{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Data for the comparison chart
        const comparisonData = {
            labels: ['You', 'Average'],
            datasets: [{
                label: 'Risk Score',
                data: [{{ risk_score }}, {{ average_risk_score }}],
                backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)'],
                borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)'],
                borderWidth: 1
            }]
        };

        // Options for the comparison chart
        const comparisonOptions = {
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100
                }
            }
        };

        // Create the comparison chart
        const comparisonCtx = document.getElementById('comparisonChart').getContext('2d');
        new Chart(comparisonCtx, {
            type: 'bar',
            data: comparisonData,
            options: comparisonOptions
        });

        // Data for the risk factors chart
        const riskFactorsData = {
            labels: [{% for factor in risk_factors %}'{{ factor.question }}',{% endfor %}],
            datasets: [{
                label: 'Factor Value',
                data: [{% for factor in risk_factors %}{{ factor.value }},{% endfor %}],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    // Add more colors if needed
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(75, 192, 192, 1)',
                    // Add more colors if needed
                ],
                borderWidth: 1
            }]
        };

        // Options for the risk factors chart
        const riskFactorsOptions = {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        };

        // Create the risk factors chart
        const riskFactorsCtx = document.getElementById('riskFactorsChart').getContext('2d');
        new Chart(riskFactorsCtx, {
            type: 'bar',
            data: riskFactorsData,
            options: riskFactorsOptions
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Example risk level and score - replace with dynamic values from backend
        const riskLevel = 'high'; // Possible values: 'low', 'medium', 'high'
        const riskScore = 75; // Example score - replace with dynamic value

        const riskLevelIndicator = document.getElementById('riskLevelIndicator');
        const riskLabel = riskLevelIndicator.querySelector('.risk-label');

        riskLevelIndicator.className = 'risk-indicator ' + riskLevel;
        riskLabel.textContent = riskLevel.charAt(0).toUpperCase() + riskLevel.slice(1) + ' Risk';

        // Set risk score dynamically if needed
        document.querySelector('.risk-score h3').textContent = 'Risk Score: ' + riskScore + '%';

    });
    
</script>


{% endblock scripts %}
